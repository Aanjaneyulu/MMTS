<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Aanjaneyulu, Anjaneyulu ">
    <meta name="description" content="MMTS Status,MMTS Live Status , Hyderabad MMTS Live Status">
    <title>hyderabad MMTS live status</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
    <link rel="icon" type="image/x-icon" href="https://avatars0.githubusercontent.com/u/3058201?v=3&s=40">
</head>
<body>
<div id="container" class="container-fluid">
    <div class="page-header"><h4 style="text-align:center">Hyderabad MMTS Live Status</h4></div>
    <div class="row">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Falaknuma <span class="glyphicon glyphicon-arrow-right"></span> Lingampally
                    </h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                        <th>#</th>
                        <th>Train No</th>
                        <th>Station</th>
                        </thead>
                        <tbody id="FL">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Hyderabad <span class="glyphicon glyphicon-arrow-right"></span> Lingampally
                    </h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                        <th>#</th>
                        <th>Train No</th>
                        <th>Station</th>
                        </thead>
                        <tbody id="HL">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="clearfix visible-sm-block"></div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">Lingampally <span class="glyphicon glyphicon-arrow-right"></span> Hyderabad
                    </h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                        <th>#</th>
                        <th>Train No</th>
                        <th>Station</th>
                        </thead>
                        <tbody id="LH">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="clearfix visible-md-block visible-lg-block"></div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">Lingampally <span class="glyphicon glyphicon-arrow-right"></span> Falaknuma
                    </h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                        <th>#</th>
                        <th>Train No</th>
                        <th>Station</th>
                        </thead>
                        <tbody id="LF">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="clearfix visible-sm-block"></div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
            <div class="panel panel-danger">
                <div class="panel-heading">
                    <h3 class="panel-title">Falaknuma <span class="glyphicon glyphicon-arrow-right"></span> Hyderabad
                    </h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Train No</th>
                            <th>Station</th>
                        </tr>
                        </thead>
                        <tbody id="FH">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
            <div class="panel panel-danger">
                <div class="panel-heading">
                    <h3 class="panel-title">Hyderabad <span class="glyphicon glyphicon-arrow-right"></span> Falaknuma
                    </h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Train No</th>
                            <th>Station</th>
                        </tr>
                        </thead>
                        <tbody id="HF">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        var url = 'https://anji.000webhostapp.com/mmts.php';
        var connectingPaths = {
            "F_S": [
                "Faluknama", "Huppuguda", "Yakutpura", "Dabirpura", "Malakpet", "Kacheguda", "Vidyanagar", "Jamai Osmania", "Arts College", "Sitafalmandi", "Secunderabad"
            ],
            "S_SA": [
                "Secunderabad", "James Street", "Sanjeevaiah Park"
            ],
            "SA_B": [
                "Sanjeevaiah Park", "Begumpet"
            ],
            "B_L": [
                "Begumpet", "Nature Cure Hospital", "Fatehnagar", "Bharatnagar", "Borabanda", "Hitech City", "Hafeezpet", "Chandanagar", "Lingampalli"
            ],
            "SA_N": [
                "Sanjeevaiah Park", "Necklace Road"
            ],
            "N_H": [
                "Necklace Road", "Khairatabad", "Lakdikapul", "Hyderabad"
            ],
            "N_B": [
                "Necklace Road", "Begumpet"
            ]
        };
        var routeMaps = {
            "FL": {
                "stations": [].concat(connectingPaths.F_S).concat(connectingPaths.S_SA.slice(1)).concat(connectingPaths.SA_B.slice(1)).concat(connectingPaths.B_L.slice(1))
            },
            "HL": {
                "stations": [].concat(connectingPaths.N_H).reverse().concat(connectingPaths.N_B.slice(1)).concat(connectingPaths.B_L.slice(1))
            },
            "FH": {
                "stations": [].concat(connectingPaths.F_S).concat(connectingPaths.S_SA.slice(1)).concat(connectingPaths.SA_N.slice(1)).concat(connectingPaths.N_H.slice(1))
            },
            "FS": {
                "stations": [].concat(connectingPaths.F_S.slice())
            },
            "SL": {
                "stations": [].concat(connectingPaths.S_SA).concat(connectingPaths.SA_B.slice(1)).concat(connectingPaths.B_L.slice(1))
            }
        };
        var routes = [
            {"route": "FL", "view": "true"},
            {"route": "LF", "view": "true"},
            {"route": "HL", "view": "true"},
            {"route": "LH", "view": "true"},
            {"route": "FH", "view": "true"},
            {"route": "HF", "view": "true"},
            {"route": "SL", "view": "false"},
            {"route": "LS", "view": "false"},
            {"route": "SF", "view": "false"},
            {"route": "FS", "view": "false"}
        ];

        function getRoute(source, destination) {
            var routeCodes = [];
            for (var routeMap in routeMaps) {
                var sourceIndex = routeMaps[routeMap].stations.indexOf(source);
                var destinationIndex = routeMaps[routeMap].stations.indexOf(destination);
                if (sourceIndex != -1 && destinationIndex != -1) {
                    if (sourceIndex > destinationIndex)
                        routeCodes.push(routeMap.split("").reverse().join(""))
                    else
                        routeCodes.push(routeMap)
                }
            }
            return routeCodes;
        }
        function status() {
            debugger;
            $.ajax({
                url: url,
                success: function (data, textStatus, jqXHR) {
                    var jsonObject = JSON.parse(data);
                    for (var routeIndex in routes) {
                        var route = routes[routeIndex].route;
                        var defaultView = routes[routeIndex].view;
                        var trains = jsonObject[route];
                        var status = "";
                        if (trains) {
                            for (var i = 0; i < trains.length; i++) {
                                var train = trains[i];
                                status += "<tr><th>" + (i + 1) + "</th><td>" + train.Trainno + "</td><td>" + train.Station + "</td></tr>";
                            }
                            $("#" + route).html(status);
                        } else {
                            status = '<tr><td colspan="3" style="text-align:center;">No train found!</td></tr>';
                            $("#" + route).html(status);
                        }
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    var errosStatus = '<tr><td colspan="3" style="text-align:center;">failed to retrieve data.Try again after some time!</td></tr>';
                    $("#FL,#HL,#LH,#LF,#FH,#HF").html(errosStatus);
                    console.log("failed to retrieve data!");
                }
            });
           setTimeout(status, 15000);
        }
        status();
    });
</script>
</body>
</html>
